import{_ as s,c as i,ag as e,o as t}from"./chunks/framework.CJ72e6E2.js";const l="/linux_exit-node_image/vpn1.png",n="/linux_exit-node_image/vpn3.jpeg",p="/linux_exit-node_image/vpn2.png",b=JSON.parse('{"title":"使用 Linux 主机设置出口节点实现科学上网","description":"","frontmatter":{},"headers":[],"relativePath":"Tools_docs/家庭服务器/linux_exit-node.md","filePath":"Tools_docs/家庭服务器/linux_exit-node.md"}'),h={name:"Tools_docs/家庭服务器/linux_exit-node.md"};function o(d,a,c,r,k,u){return t(),i("div",null,a[0]||(a[0]=[e(`<h1 id="使用-linux-主机设置出口节点实现科学上网" tabindex="-1">使用 Linux 主机设置出口节点实现科学上网 <a class="header-anchor" href="#使用-linux-主机设置出口节点实现科学上网" aria-label="Permalink to &quot;使用 Linux 主机设置出口节点实现科学上网&quot;">​</a></h1><p>假设你有一台始终可以连接正常网络的 Linux 主机，我们可以将这台主机设置为出口节点，然后其他所有设备都可以访问这台主机，使用这台主机的 IP 地址，实现科学上网。</p><h2 id="安装-tailscale" tabindex="-1">安装 Tailscale <a class="header-anchor" href="#安装-tailscale" aria-label="Permalink to &quot;安装 Tailscale&quot;">​</a></h2><p>首先，我们需要在这台主机上安装 Tailscale。详情可以参考官方网站：<a href="https://tailscale.com/download/linux" target="_blank" rel="noreferrer">Tailscale 下载页面</a>。</p><p>Tailscale 的底层是基于 WireGuard 的，免费版就可以组成 100 个设备的局域网。同样，我们也可以在手机和其他电脑上安装 Tailscale。登录相同的账号后，我们即可组建自己的局域网。</p><h2 id="配置-linux-主机作为出口节点" tabindex="-1">配置 Linux 主机作为出口节点 <a class="header-anchor" href="#配置-linux-主机作为出口节点" aria-label="Permalink to &quot;配置 Linux 主机作为出口节点&quot;">​</a></h2><h3 id="开启-ip-转发" tabindex="-1">开启 IP 转发 <a class="header-anchor" href="#开启-ip-转发" aria-label="Permalink to &quot;开启 IP 转发&quot;">​</a></h3><p>编辑 <code>sysctl.conf</code> 文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span></span></code></pre></div><p>添加以下两行，或者将这两行的注释取消掉：</p><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>net.ipv4.ip_forward=1</span></span>
<span class="line"><span>net.ipv6.conf.all.forwarding=1</span></span></code></pre></div><p>应用更改：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div><p>如果您此时正在使用 SSH 连接这台主机进行操作，为了避免 SSH 断开连接，请使用以下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tailscale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --advertise-exit-node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ssh</span></span></code></pre></div><p>如果您直接操作这台主机，并可以完全重启服务，请使用以下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tailscale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --advertise-exit-node</span></span></code></pre></div><h3 id="检查-tailscale-状态" tabindex="-1">检查 Tailscale 状态 <a class="header-anchor" href="#检查-tailscale-状态" aria-label="Permalink to &quot;检查 Tailscale 状态&quot;">​</a></h3><p>检查 Tailscale 的运行状态：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tailscale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span></code></pre></div><p>验证 IP 转发是否生效：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net.ipv4.ip_forward</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net.ipv6.conf.all.forwarding</span></span></code></pre></div><h2 id="配置-tailscale-管理后台" tabindex="-1">配置 Tailscale 管理后台 <a class="header-anchor" href="#配置-tailscale-管理后台" aria-label="Permalink to &quot;配置 Tailscale 管理后台&quot;">​</a></h2><p>登录到 <a href="https://admin.tailscale.com" target="_blank" rel="noreferrer">Tailscale 管理后台</a>：</p><ol><li>找到您想作为出口节点的主机。</li><li>点击 <strong>Edit route settings</strong> 部分。</li></ol><p><img src="`+l+'" alt=" "> 3. 允许主机作为出口节点。</p><ol start="4"><li>保存更改。</li></ol><h2 id="配置其他设备" tabindex="-1">配置其他设备 <a class="header-anchor" href="#配置其他设备" aria-label="Permalink to &quot;配置其他设备&quot;">​</a></h2><p>接下来打开其他设备的 Tailscale 应用（以手机和 Mac 为例）：</p><h3 id="手机配置" tabindex="-1">手机配置 <a class="header-anchor" href="#手机配置" aria-label="Permalink to &quot;手机配置&quot;">​</a></h3><p>打开手机上的 Tailscale 应用，可以看到以下选项，选中即可启用该服务。 <img src="'+n+'" alt=" "></p><h3 id="mac-配置" tabindex="-1">Mac 配置 <a class="header-anchor" href="#mac-配置" aria-label="Permalink to &quot;Mac 配置&quot;">​</a></h3><p>在 Mac 上，点击顶部状态栏中的 Tailscale 图标，选择出口节点进行连接。 <img src="'+p+'" alt=" "></p>',33)]))}const F=s(h,[["render",o]]);export{b as __pageData,F as default};
